"use strict";const CONFIG={preloaderFadeDuration:1e3,scrollAnimationDuration:300,navbarOffset:90,sectionIds:["section_1","section_3","section_4"]};function throttle(e,t){let n;return function(){const o=arguments,i=this;n||(e.apply(i,o),n=!0,setTimeout(()=>n=!1,t))}}function debounce(e,t){let n;return function(){const o=this,i=arguments;clearTimeout(n),n=setTimeout(()=>e.apply(o,i),t)}}function initPreloader(){window.addEventListener("load",()=>{const e=document.querySelector(".preloader");e&&(e.style.opacity="0",e.style.transition=`opacity ${CONFIG.preloaderFadeDuration}ms`,setTimeout(()=>{e.style.display="none"},CONFIG.preloaderFadeDuration))})}function initSmoothScroll(){document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".custom-link").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const n=e.getAttribute("href"),o=document.querySelector(n);if(o){const e=document.querySelector(".navbar"),t=e?e.offsetHeight+10:10,n=o.offsetTop-t;window.scrollTo({top:n,behavior:"smooth"})}})})})}let navbarLinks=null,sections=null;function initScrollNavigation(){if(navbarLinks=document.querySelectorAll(".navbar-nav .nav-item .nav-link"),sections=CONFIG.sectionIds.map(e=>document.getElementById(e)).filter(Boolean),0===sections.length)return;const e=throttle(updateActiveNav,16);window.addEventListener("scroll",e,{passive:!0}),setupClickHandlers(),setInitialNavState()}function updateActiveNav(){const e=(window.pageYOffset||document.documentElement.scrollTop)+1;sections.forEach((t,n)=>{if(!t)return;const o=t.offsetTop-CONFIG.navbarOffset;e>=o&&(navbarLinks.forEach(e=>{e.classList.remove("active"),e.classList.add("inactive")}),navbarLinks[n]&&(navbarLinks[n].classList.add("active"),navbarLinks[n].classList.remove("inactive")))})}function setupClickHandlers(){document.querySelectorAll(".click-scroll").forEach((e,t)=>{e.addEventListener("click",e=>{e.preventDefault();const n=sections[t];if(!n)return;const o=n.offsetTop-CONFIG.navbarOffset;window.scrollTo({top:o,behavior:"smooth"})})})}function setInitialNavState(){navbarLinks.forEach(e=>{e.classList.add("inactive")}),navbarLinks[0]&&(navbarLinks[0].classList.add("active"),navbarLinks[0].classList.remove("inactive"))}function getNextDayOfWeek(e,t){const n=new Date(e.getTime());return n.setDate(e.getDate()+(7+t-e.getDay())%7),n.getDate()===e.getDate()&&n.setDate(e.getDate()+7),n}function formatDate(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function generateUpcomingEvents(){const e=getNextDayOfWeek(new Date,3),t=new Date(e);return t.setDate(e.getDate()+7),[{name:"CTWR Weekly Hacknight",local_date:formatDate(e),local_time:"18:00",venue:{name:"Downtown Kitchener"},link:"https://www.meetup.com/civictechwr/events/"},{name:"CivicTech Waterloo Region Hacknight",local_date:formatDate(t),local_time:"18:00",venue:{name:"Downtown Kitchener"},link:"https://www.meetup.com/civictechwr/events/"}]}const upcomingEvents=generateUpcomingEvents();function parseDateTime(e,t){const[n,o,i]=e.split("-"),[a,r]=t.split(":");return new Date(n,o-1,i,a,r)}function displayEvent(e){const t=parseDateTime(e.local_date,e.local_time).toLocaleString("en-US",{weekday:"long",hour12:!0,hour:"numeric",minute:"numeric"}),n=e.venue?e.venue.name:"Venue TBD",o=document.getElementById("meeting-name"),i=document.getElementById("meeting-date-time"),a=document.getElementById("meeting-location"),r=document.getElementById("meeting-btn");o&&(o.textContent=e.name),i&&(i.textContent=t),a&&(a.textContent=n),r&&r.setAttribute("href",e.link)}function initMeetingEvents(){const e=()=>{upcomingEvents.length>0&&displayEvent(upcomingEvents[0])};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}function initProjectCards(){document.addEventListener("DOMContentLoaded",()=>{})}class PerformanceMonitor{constructor(){this.metrics={},this.memoryThreshold=52428800}init(){this.observeCoreWebVitals(),this.monitorMemoryUsage()}observeCoreWebVitals(){if("PerformanceObserver"in window)try{new PerformanceObserver(e=>{const t=e.getEntries(),n=t[t.length-1];this.metrics.lcp=n.startTime}).observe({entryTypes:["largest-contentful-paint"]});new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.metrics.fid=e.processingStart-e.startTime})}).observe({entryTypes:["first-input"]})}catch(e){}}monitorMemoryUsage(){if(!("memory"in performance))return;const e=()=>{const e=performance.memory,t=Math.round(e.usedJSHeapSize/1024/1024);t>50&&(console.warn(`High memory usage: ${t}MB`),window.gc&&window.gc())};setInterval(e,3e4),e()}}function initLazyLoading(){if("IntersectionObserver"in window){const e=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.dataset.src&&(n.src=n.dataset.src,n.classList.remove("lazy"),t.unobserve(n))}})});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}}function initPerformanceMonitoring(){const e=new PerformanceMonitor;e.init(),window.performanceMonitor=e}function init(){initPreloader(),initSmoothScroll(),initScrollNavigation(),initMeetingEvents(),initProjectCards(),initLazyLoading(),initPerformanceMonitoring()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",init):init();